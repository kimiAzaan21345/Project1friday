<html lang="en">
  <%- include('./partials/head') %>
  <body>
    <%- include('./partials/navbar') %> <%- include('./partials/flash') %>
    <div class="container mt-5">
      <h2>All Coins</h2>
      <ul class="list-group">
        <% coins.forEach(function(coin) { %>
        <li
          class="list-group-item d-flex justify-content-between align-items-center"
        >
          <div class="d-flex align-items-center">
            <img
              src="<%= coin.image ?? 'https://via.placeholder.com/30' %>"
              alt="<%= coin.name ?? 'No name available' %>"
              class="img-fluid rounded-circle"
              width="30"
              height="30"
            />
            <span class="ml-2"
              ><%= coin.name ?? 'No name available' %> (<%= coin.symbol ?? 'N/A'
              %>)</span
            >
          </div>
          <div>
            <strong>Price:</strong> <%= coin.current_price ?? 'Not available' %>
            USD<br />
            <strong>Market Cap:</strong> <%= coin.market_cap ?? 'Not available'
            %> USD<br />
            <strong>24h Change:</strong> <%=
            coin.price_change_percentage_24h?.toFixed(2) ?? 'N/A' %>%<br />
            <form action="/coins" method="POST" class="d-inline">
              <input
                type="hidden"
                name="coinId"
                value="<%= coin.id ?? 'unknown' %>"
              />
              <input type="hidden" name="symbol" value="<%= coin.symbol %>" />
              <input type="hidden" name="name" value="<%= coin.name %>" />
              <input
                type="hidden"
                name="image_url"
                value="<%= coin.image_url %>"
              />
              <input
                type="hidden"
                name="current_price"
                value="<%= coin.current_price %>"
              />
              <input
                type="hidden"
                name="market_cap"
                value="<%= coin.market_cap %>"
              />
              <input
                type="hidden"
                name="market_cap_rank"
                value="<%= coin.market_cap_rank %>"
              />
              <input
                type="hidden"
                name="fully_diluted_valuation"
                value="<%= coin.fully_diluted_valuation %>"
              />
              <input
                type="hidden"
                name="total_volume"
                value="<%= coin.total_volume %>"
              />
              <input
                type="hidden"
                name="high_24h"
                value="<%= coin.high_24h %>"
              />
              <input type="hidden" name="low_24h" value="<%= coin.low_24h %>" />
              <input
                type="hidden"
                name="price_change_24h"
                value="<%= coin.price_change_24h %>"
              />
              <input
                type="hidden"
                name="price_change_percentage_24h"
                value="<%= coin.price_change_percentage_24h %>"
              />
              <input
                type="hidden"
                name="market_cap_change_24h"
                value="<%= coin.market_cap_change_24h %>"
              />
              <input
                type="hidden"
                name="market_cap_change_percentage_24h"
                value="<%= coin.market_cap_change_percentage_24h %>"
              />
              <input
                type="hidden"
                name="circulating_supply"
                value="<%= coin.circulating_supply %>"
              />
              <input
                type="hidden"
                name="total_supply"
                value="<%= coin.total_supply %>"
              />
              <input
                type="hidden"
                name="max_supply"
                value="<%= coin.max_supply %>"
              />
              <input type="hidden" name="ath" value="<%= coin.ath %>" />
              <input
                type="hidden"
                name="ath_change_percentage"
                value="<%= coin.ath_change_percentage %>"
              />
              <input
                type="hidden"
                name="ath_date"
                value="<%= coin.ath_date %>"
              />
              <input type="hidden" name="atl" value="<%= coin.atl %>" />
              <input
                type="hidden"
                name="atl_change_percentage"
                value="<%= coin.atl_change_percentage %>"
              />
              <input
                type="hidden"
                name="atl_date"
                value="<%= coin.atl_date %>"
              />
              <input
                type="hidden"
                name="last_updated"
                value="<%= coin.last_updated %>"
              />
              <button type="submit" class="btn btn-success">Save</button>
            </form>
          </div>
        </li>
        <% }) %>
      </ul>
    </div>
  </body>
</html>
